import{V as he,H as U,W as _,o as le,e as oe,G as Z,g as fe,h as se,s as ie,X as ce,Y as de,Z as ue}from"./index-c81fc3b0.js";const pe=/(\w+)End$/,ve=/(\w+)Center$/,A=["HTML","BODY"];function ge(F,h,c,w=!1,B=!0,T){if(!F||!h||!c)throw new Error("One of the parameters of referenceEl, targetEl, direction is missing!");c=he(c);let k=c,b=!1,I=!1;pe.test(c)&&(c=RegExp.$1,b=!0),ve.test(c)&&(c=RegExp.$1,I=!0);let f={top:U(),left:_()};var t=le(F),N=oe(F),L=oe(h),d=F.getBoundingClientRect(),J=h.style.display,K=h.style.opacity,Q=Z(h,"display"),j=Z(h,"position")==="fixed";Q==="none"&&(h.style.opacity="0",h.style.display="block");var W=!0;let g=h.offsetParent||document.body,E=!g||A.includes(g.nodeName),v={top:0,left:0};if(E||(v=le(g)),N){var q=Z(document.body,"overflow");!j&&E&&q!=="hidden"&&(t.top=t.top+U(),t.left=t.left+_()),!j&&!E&&(W=!0)}let m=fe(F),S=0,y=0;m&&!A.includes(m.nodeName)&&(S=U(m),y=_(m));let a=A.includes(g.nodeName),s=se(),n={vertical:!1,horizontal:!1};a&&(n={vertical:Z(document.body,"overflow-y")!="hidden",horizontal:Z(document.body,"overflow-x")!="hidden"});let $=ie(),re=ce(),C={width:re.pc?window.innerWidth:Math.min(document.documentElement.clientWidth,window.innerWidth),height:re.pc?window.innerHeight:Math.min(document.documentElement.clientHeight,window.innerHeight)};var z=h.getBoundingClientRect(),ae=de(Z(h,"transform"));z.width=Math.round(z.width/Math.abs(ae.scaleX)),z.height=Math.round(z.height/Math.abs(ae.scaleY));var M=(T==null?void 0:T.top)||0,x=(T==null?void 0:T.left)||0,D=null,o=[],O=function(l,i){var e=t.top+d.height,r=l?Math.floor(t.left-(z.width-d.width)):t.left;!l&&i&&(r-=(z.width-d.width)/2);var p=null,u=null;e+=M,r+=x,a&&(s.vertical&&!n.vertical&&(e+=f.top),s.horizontal&&!n.horizontal&&(r+=f.left));var P=R({ele:h,top:e,left:r,needSubtractScrollOffset:W,bodyScrollVisible:n,targetIsInBody:a,referenceIsInFixedPosition:N,documentHasScroll:s,documentScrollInfo:f,scrollParent:m,windowWH:{...C},targetIsInFixedPosition:L});e-=a?S:0,r-=a?y:0,a?(u=C.width-t.left+y-d.width,s.vertical&&n.vertical&&(u-=$.vertical),s.horizontal&&!n.horizontal&&(u-=f.left)):u=g.clientWidth-(t.left-v.left)-d.width;let H=e-v.top,V=r-v.left;return H-=M,V-=x,{...P,direction:!l&&i?"bottomCenter":l?"bottomEnd":"bottom",top:H,left:V,bottom:p,right:l?u:null}};let Y=function(l,i){var e=t.top-z.height,r=l?Math.floor(t.left-(z.width-d.width)):t.left;!l&&i&&(r-=(z.width-d.width)/2),e+=M,r+=x,a&&(s.vertical&&!n.vertical&&(e+=f.top),s.horizontal&&!n.horizontal&&(r+=f.left));var p=R({ele:h,top:e,left:r,needSubtractScrollOffset:W,bodyScrollVisible:n,targetIsInBody:a,referenceIsInFixedPosition:N,documentHasScroll:s,documentScrollInfo:f,scrollParent:m,windowWH:{...C},targetIsInFixedPosition:L});e-=a?S:0,r-=a?y:0;var u=null,P=null;a?(u=C.height-t.top+S,P=C.width-t.left+y-d.width,s.vertical&&n.vertical&&(P-=$.vertical),s.horizontal&&!n.horizontal&&(P-=f.left),s.horizontal&&n.horizontal&&(u-=$.horizontal),s.vertical&&!n.vertical&&(u-=f.top)):(u=g.clientHeight-(t.top-v.top),P=g.clientWidth-(t.left-v.left)-d.width);let H=e-v.top,V=r-v.left;return H-=M,V-=x,{...p,direction:!l&&i?"topCenter":l?"topEnd":"top",bottom:u,right:l?P:null,top:H,left:V}},X=function(l,i){var e=l?Math.floor(t.top-(z.height-d.height)):t.top,r=t.left-z.width;!l&&i&&(e-=(z.height-d.height)/2);var p=null,u=null;e+=M,r+=x,a?(s.vertical&&!n.vertical&&(e+=f.top),s.horizontal&&!n.horizontal&&(r+=f.left),l&&(p=C.height-(t.top+d.height)+S)):l&&(p=g.clientHeight-(t.top+d.height-v.top));var P=R({ele:h,top:e,left:r,needSubtractScrollOffset:W,bodyScrollVisible:n,targetIsInBody:a,referenceIsInFixedPosition:N,documentHasScroll:s,documentScrollInfo:f,scrollParent:m,windowWH:{...C},targetIsInFixedPosition:L});e-=a?S:0,r-=a?y:0,a?(u=C.width-t.left+y,s.vertical&&n.vertical&&(u-=$.vertical),s.horizontal&&!n.horizontal&&(u-=f.left),l&&(s.horizontal&&n.horizontal&&(p-=$.horizontal),s.vertical&&!n.vertical&&(p-=f.top))):u=g.clientWidth-(t.left-v.left);let H=e-v.top,V=r-v.left;return H-=M,V-=x,{...P,right:u,bottom:p,direction:!l&&i?"leftCenter":l?"leftEnd":"left",top:H,left:V}},G=function(l,i){var e=l?Math.floor(t.top-(z.height-d.height)):t.top,r=t.left+d.width;!l&&i&&(e-=(z.height-d.height)/2),e+=M,r+=x,a&&(s.vertical&&!n.vertical&&(e+=f.top),s.horizontal&&!n.horizontal&&(r+=f.left));var p=null,u=null;l&&(a?p=C.height-(t.top+d.height)+S:p=g.clientHeight-(t.top+d.height-v.top));var P=R({ele:h,top:e,left:r,bodyScrollVisible:n,needSubtractScrollOffset:W,targetIsInBody:a,referenceIsInFixedPosition:N,documentHasScroll:s,documentScrollInfo:f,scrollParent:m,windowWH:{...C},targetIsInFixedPosition:L});e-=a?S:0,r-=a?y:0;let H=e-v.top,V=r-v.left;return a&&l&&(s.vertical&&!n.vertical&&(p-=f.top),s.horizontal&&n.horizontal&&(p-=$.horizontal)),H-=M,V-=x,{...P,right:u,bottom:p,direction:!l&&i?"rightCenter":l?"rightEnd":"right",top:H,left:V}};switch(c){case"bottom":I&&o.push({isTail:!1,isCenter:!0,handler:O}),o.push({isTail:b,handler:O}),I&&o.push({isTail:!1,isCenter:!0,handler:Y}),o.push({isTail:b,handler:Y}),w&&(o.push({isTail:!1,handler:X}),o.push({isTail:!1,handler:G}));break;case"top":I&&o.push({isTail:!1,isCenter:!0,handler:Y}),o.push({isTail:b,handler:Y}),I&&o.push({isTail:!1,isCenter:!0,handler:O}),o.push({isTail:b,handler:O}),w&&(o.push({isTail:!1,handler:X}),o.push({isTail:!1,handler:G}));break;case"left":I&&o.push({isTail:!1,isCenter:!0,handler:X}),o.push({isTail:b,handler:X}),I&&o.push({isTail:!1,isCenter:!0,handler:G}),o.push({isTail:b,handler:G}),w&&(o.push({isTail:!1,handler:O}),o.push({isTail:!1,handler:Y}));break;case"right":I&&o.push({isTail:!1,isCenter:!0,handler:G}),o.push({isTail:b,handler:G}),I&&o.push({isTail:!1,isCenter:!0,handler:X}),o.push({isTail:b,handler:X}),w&&(o.push({isTail:!1,handler:O}),o.push({isTail:!1,handler:Y}));break}let ee=[],te={},ne=function(l=!1,i){let e=i.handler(B?!i.isTail:i.isTail,i.isCenter),r=e.vertical&&e.horizontal,p=e.scrollParentVertical&&e.scrollParentHorizontal,u=l?r&&p:r||p;return e.direction===k&&(te=e),ee.push(e),u?(D=e,!0):!1};if(o.some(function(l){let i=l.handler(l.isTail,l.isCenter),e=i.vertical&&i.horizontal,r=i.scrollParentVertical&&i.scrollParentHorizontal;if(i.direction===k&&(te=i),ee.push(i),e)return!r&&!l.isCenter?!!ne(!0,l):(D=i,!0);if(!l.isCenter)return ne(!0,l)}),!D){let l=null,i=null;ee.forEach(e=>{!l&&e.horizontal&&e.vertical&&(l=e),!i&&e.scrollParentHorizontal&&e.scrollParentVertical&&(i=e)}),i?D=i:l?D=l:(D=te,D.isRollback=!0)}return h.style.opacity=K||"",h.style.display=J||"",D}function R(F){let{ele:h,top:c,left:w,needSubtractScrollOffset:B,documentHasScroll:T,documentScrollInfo:k,bodyScrollVisible:b,referenceIsInFixedPosition:I,scrollParent:f,windowWH:t,targetIsInFixedPosition:N,targetIsInBody:L}=F,d=0,J=0,K=!0,Q=!0;if(f&&!A.includes(f.nodeName)){d=U(f),J=_(f);let S=c,y=w;I&&L&&(T.vertical&&!b.vertical&&(S-=k.top),T.horizontal&&!b.horizontal&&(y-=k.left));let a=ue(h,f,S,y,B);Q=a.horizontal,K=a.vertical}if(!c||!w){var j=le(h);c||(c=j.top),w||(w=j.left)}N||(T.vertical&&(c-=k.top),T.horizontal&&(w-=k.left)),c=c-d,w=w-J;let W=h.offsetHeight+c,g=h.offsetWidth+w;T.vertical&&(t.width=t.width-ie().vertical),T.horizontal&&(t.height=t.height-ie().horizontal);let E=c>0&&c<t.height&&W>0&&W<=t.height,v=w>0&&w<t.width&&g>0&&g<=t.width,q=-1,m=-1;return E||(c<0?q=h.offsetHeight+c:W>t.height&&(q=W-t.height)),v||(w<0?m=h.offsetWidth+w:g>t.width&&(m=g-t.width)),{scrollParentHorizontal:Q,scrollParentVertical:K,horizontalVisibleWidth:m,verticalVisibleHeight:q,vertical:E,horizontal:v}}export{ge as g};
