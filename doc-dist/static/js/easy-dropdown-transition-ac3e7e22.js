import{L as ie,$ as re,a0 as pe,o as ae,s as ne,a1 as fe,e as oe,K as J,g as ve,h as se,a2 as he,a3 as ce}from"./index-cf1711eb.js";const de=/(\w+)End$/,ue=/(\w+)Center$/,_=["HTML","BODY"];function B(N){let{ele:a,top:u,left:T,needSubtractScrollOffset:ee,documentHasScroll:I,documentScrollInfo:X,bodyScrollVisible:P,referenceIsInFixedPosition:y,scrollParent:h,windowWH:r,targetIsInFixedPosition:G,targetIsInBody:D}=N,g=0,Q=0,b=!0,M=!0;if(h&&!_.includes(h.nodeName)){g=ie(h),Q=re(h);let W=u,H=T;y&&D&&(I.vertical&&!P.vertical&&(W-=X.top),I.horizontal&&!P.horizontal&&(H-=X.left));let f=pe(a,h,W,H,ee);M=f.horizontal,b=f.vertical}if(!u||!T){var U=ae(a);u||(u=U.top),T||(T=U.left)}G||(I.vertical&&(u-=X.top),I.horizontal&&(T-=X.left)),u=u-g,T=T-Q;let O=a.offsetHeight+u,C=a.offsetWidth+T;I.vertical&&(r.width=r.width-ne().vertical),I.horizontal&&(r.height=r.height-ne().horizontal);let R=u>0&&u<r.height&&O>0&&O<=r.height,v=T>0&&T<r.width&&C>0&&C<=r.width,Z=-1,S=-1;return R||(u<0?Z=a.offsetHeight+u:O>r.height&&(Z=O-r.height)),v||(T<0?S=a.offsetWidth+T:C>r.width&&(S=C-r.width)),{scrollParentHorizontal:M,scrollParentVertical:b,horizontalVisibleWidth:S,verticalVisibleHeight:Z,vertical:R,horizontal:v}}function ge(N,a,u,T=!1,ee=!0,I){if(!N||!a||!u)throw new Error("One of the parameters of referenceEl, targetEl, direction is missing!");u=fe(u);let X=u,P=!1,y=!1;de.test(u)&&(u=RegExp.$1,P=!0),ue.test(u)&&(u=RegExp.$1,y=!0);let h={top:ie(),left:re()};var r=ae(N),G=oe(N),D=oe(a),g=N.getBoundingClientRect(),Q=a.style.display,b=a.style.opacity,M=J(a,"display"),U=J(a,"position")==="fixed";M==="none"&&(a.style.opacity="0",a.style.display="block");var O=!0;let C=a.offsetParent||document.body,R=!C||_.includes(C.nodeName),v={top:0,left:0};if(R||(v=ae(C)),G){var Z=J(document.body,"overflow");!U&&R&&Z!=="hidden"&&(r.top=r.top+ie(),r.left=r.left+re()),!U&&!R&&(O=!0)}let S=ve(N),W=0,H=0;S&&!_.includes(S.nodeName)&&(W=ie(S),H=re(S));let f=_.includes(C.nodeName),d=se(),s={vertical:!1,horizontal:!1};f&&(s={vertical:J(document.body,"overflow-y")!="hidden",horizontal:J(document.body,"overflow-x")!="hidden"});let K=ne(),te=he(),x={width:te.pc?window.innerWidth:Math.min(document.documentElement.clientWidth,window.innerWidth),height:te.pc?window.innerHeight:Math.min(document.documentElement.clientHeight,window.innerHeight)};var o=a.getBoundingClientRect(),le=ce(J(a,"transform"));o.width=Math.round(o.width/Math.abs(le.scaleX)),o.height=Math.round(o.height/Math.abs(le.scaleY));var F=(I==null?void 0:I.top)||0,k=(I==null?void 0:I.left)||0,V=null,n=[],E=function(e,t){var l=r.top+g.height,i=e?Math.floor(r.left-(o.width-g.width)):r.left;!e&&t&&(i-=(o.width-g.width)/2);var w=null,p=null;l+=F,i+=k,f&&(d.vertical&&!s.vertical&&(l+=h.top),d.horizontal&&!s.horizontal&&(i+=h.left));var z=B({ele:a,top:l,left:i,needSubtractScrollOffset:O,bodyScrollVisible:s,targetIsInBody:f,referenceIsInFixedPosition:G,documentHasScroll:d,documentScrollInfo:h,scrollParent:S,windowWH:{...x},targetIsInFixedPosition:D});l-=f?W:0,i-=f?H:0,f?(p=x.width-r.left+H-g.width,d.vertical&&s.vertical&&(p-=K.vertical),d.horizontal&&!s.horizontal&&(p-=h.left)):p=C.clientWidth-(r.left-v.left)-g.width;let $=l-v.top,Y=i-v.left;return $-=F,Y-=k,{...z,direction:!e&&t?"bottomCenter":e?"bottomEnd":"bottom",top:$,left:Y,bottom:w,right:e?p:null}};let L=function(e,t){var l=r.top-o.height,i=e?Math.floor(r.left-(o.width-g.width)):r.left;!e&&t&&(i-=(o.width-g.width)/2),l+=F,i+=k,f&&(d.vertical&&!s.vertical&&(l+=h.top),d.horizontal&&!s.horizontal&&(i+=h.left));var w=B({ele:a,top:l,left:i,needSubtractScrollOffset:O,bodyScrollVisible:s,targetIsInBody:f,referenceIsInFixedPosition:G,documentHasScroll:d,documentScrollInfo:h,scrollParent:S,windowWH:{...x},targetIsInFixedPosition:D});l-=f?W:0,i-=f?H:0;var p=null,z=null;f?(p=x.height-r.top+W,z=x.width-r.left+H-g.width,d.vertical&&s.vertical&&(z-=K.vertical),d.horizontal&&!s.horizontal&&(z-=h.left),d.horizontal&&s.horizontal&&(p-=K.horizontal),d.vertical&&!s.vertical&&(p-=h.top)):(p=C.clientHeight-(r.top-v.top),z=C.clientWidth-(r.left-v.left)-g.width);let $=l-v.top,Y=i-v.left;return $-=F,Y-=k,{...w,direction:!e&&t?"topCenter":e?"topEnd":"top",bottom:p,right:e?z:null,top:$,left:Y}},j=function(e,t){var l=e?Math.floor(r.top-(o.height-g.height)):r.top,i=r.left-o.width;!e&&t&&(l-=(o.height-g.height)/2);var w=null,p=null;l+=F,i+=k,f?(d.vertical&&!s.vertical&&(l+=h.top),d.horizontal&&!s.horizontal&&(i+=h.left),e&&(w=x.height-(r.top+g.height)+W)):e&&(w=C.clientHeight-(r.top+g.height-v.top));var z=B({ele:a,top:l,left:i,needSubtractScrollOffset:O,bodyScrollVisible:s,targetIsInBody:f,referenceIsInFixedPosition:G,documentHasScroll:d,documentScrollInfo:h,scrollParent:S,windowWH:{...x},targetIsInFixedPosition:D});l-=f?W:0,i-=f?H:0,f?(p=x.width-r.left+H,d.vertical&&s.vertical&&(p-=K.vertical),d.horizontal&&!s.horizontal&&(p-=h.left),e&&(d.horizontal&&s.horizontal&&(w-=K.horizontal),d.vertical&&!s.vertical&&(w-=h.top))):p=C.clientWidth-(r.left-v.left);let $=l-v.top,Y=i-v.left;return $-=F,Y-=k,{...z,right:p,bottom:w,direction:!e&&t?"leftCenter":e?"leftEnd":"left",top:$,left:Y}},q=function(e,t){var l=e?Math.floor(r.top-(o.height-g.height)):r.top,i=r.left+g.width;!e&&t&&(l-=(o.height-g.height)/2),l+=F,i+=k,f&&(d.vertical&&!s.vertical&&(l+=h.top),d.horizontal&&!s.horizontal&&(i+=h.left));var w=null,p=null;e&&(f?w=x.height-(r.top+g.height)+W:w=C.clientHeight-(r.top+g.height-v.top));var z=B({ele:a,top:l,left:i,bodyScrollVisible:s,needSubtractScrollOffset:O,targetIsInBody:f,referenceIsInFixedPosition:G,documentHasScroll:d,documentScrollInfo:h,scrollParent:S,windowWH:{...x},targetIsInFixedPosition:D});l-=f?W:0,i-=f?H:0;let $=l-v.top,Y=i-v.left;return f&&e&&(d.vertical&&!s.vertical&&(w-=h.top),d.horizontal&&s.horizontal&&(w-=K.horizontal)),$-=F,Y-=k,{...z,right:p,bottom:w,direction:!e&&t?"rightCenter":e?"rightEnd":"right",top:$,left:Y}};switch(u){case"bottom":y&&n.push({isTail:!1,isCenter:!0,handler:E}),n.push({isTail:P,handler:E}),y&&n.push({isTail:!1,isCenter:!0,handler:L}),n.push({isTail:P,handler:L}),T&&(n.push({isTail:!1,handler:j}),n.push({isTail:!1,handler:q}));break;case"top":y&&n.push({isTail:!1,isCenter:!0,handler:L}),n.push({isTail:P,handler:L}),y&&n.push({isTail:!1,isCenter:!0,handler:E}),n.push({isTail:P,handler:E}),T&&(n.push({isTail:!1,handler:j}),n.push({isTail:!1,handler:q}));break;case"left":y&&n.push({isTail:!1,isCenter:!0,handler:j}),n.push({isTail:P,handler:j}),y&&n.push({isTail:!1,isCenter:!0,handler:q}),n.push({isTail:P,handler:q}),T&&(n.push({isTail:!1,handler:E}),n.push({isTail:!1,handler:L}));break;case"right":y&&n.push({isTail:!1,isCenter:!0,handler:q}),n.push({isTail:P,handler:q}),y&&n.push({isTail:!1,isCenter:!0,handler:j}),n.push({isTail:P,handler:j}),T&&(n.push({isTail:!1,handler:E}),n.push({isTail:!1,handler:L}));break}let A=[],c={},m=function(e=!1,t){let l=t.handler(ee?!t.isTail:t.isTail,t.isCenter),i=l.vertical&&l.horizontal,w=l.scrollParentVertical&&l.scrollParentHorizontal,p=e?i&&w:i||w;return l.direction===X&&(c=l),A.push(l),p?(V=l,!0):!1};if(n.some(function(e){let t=e.handler(e.isTail,e.isCenter),l=t.vertical&&t.horizontal,i=t.scrollParentVertical&&t.scrollParentHorizontal;if(t.direction===X&&(c=t),A.push(t),l)return i?(V=t,!0):e.isCenter?void 0:!!m(!0,e);if(!e.isCenter)return m(!0,e)}),!V){let e=null,t=null;A.forEach(l=>{!e&&l.horizontal&&l.vertical&&(e=l),!t&&l.scrollParentHorizontal&&l.scrollParentVertical&&(t=l)}),t?V=t:e?V=e:(V=c,V.isRollback=!0)}return a.style.opacity=b||"",a.style.display=Q||"",V}function me(N,a,u,T=!1,ee=!0,I){if(!N||!a||!u)throw new Error("One of the parameters of virtualMouseEvt, targetEl, direction is missing!");u=fe(u);let X=u,P=!1,y=!1;de.test(u)&&(u=RegExp.$1,P=!0),ue.test(u)&&(u=RegExp.$1,y=!0);let h={top:ie(),left:re()};var r=N.clientX,G=N.clientY,D=N.contextElement,g=!!D&&D.nodeType==1&&!_.includes(D.nodeName),Q=ae(D),b={top:Q.top,left:Q.left,bottom:Q.top+(g?D.offsetHeight:0),right:Q.left+(g?D.offsetWidth:0)},M=oe(a),U=a.style.display,O=a.style.opacity,C=J(a,"display");C==="none"&&(a.style.opacity="0",a.style.display="block");var R=!M;let v=a.offsetParent||document.body,Z=!v||_.includes(v.nodeName),S={top:0,left:0},W=v.getBoundingClientRect(),H={left:0,top:0};Z||(S=ae(v),H.top=v.scrollTop,H.left=v.scrollLeft);let f=_.includes(v.nodeName),d=se(),s={vertical:!1,horizontal:!1};f&&(s={vertical:J(document.body,"overflow-y")!="hidden",horizontal:J(document.body,"overflow-x")!="hidden"});let K=ne(),te=he(),x={width:te.pc?window.innerWidth:Math.min(document.documentElement.clientWidth,window.innerWidth),height:te.pc?window.innerHeight:Math.min(document.documentElement.clientHeight,window.innerHeight)};var o=a.getBoundingClientRect(),le=ce(J(a,"transform"));o.width=Math.round(o.width/Math.abs(le.scaleX)),o.height=Math.round(o.height/Math.abs(le.scaleY));var F=(I==null?void 0:I.top)||0,k=(I==null?void 0:I.left)||0,V=null,n=[],E=function(c,m){var e=G,t=r;c&&(t-=o.width),m&&(e-=o.height/2);var l=null,i=null;M||(e+=h.top,t+=h.left),g&&f&&(e>=b.bottom||e+o.height>=b.bottom?e=b.bottom-o.height:e<b.top&&(e=b.top),c&&t+o.width>b.right||!c&&t>b.right?t=b.right-o.width:t<b.left&&(t=b.left)),e+=F,t+=k,f||(e+=H.top,t+=H.left);var w=B({ele:a,top:e,left:t,needSubtractScrollOffset:R,bodyScrollVisible:s,targetIsInBody:f,referenceIsInFixedPosition:!1,documentHasScroll:d,documentScrollInfo:h,scrollParent:g?D:v,windowWH:{...x},targetIsInFixedPosition:M});let p=e,z=t;return M?(p-=W.top,z-=W.left):(p-=S.top,z-=S.left),f?(i=x.width-t,d.vertical&&s.vertical&&(i-=K.vertical),d.horizontal&&!s.horizontal&&(i-=h.left)):i=v.clientWidth-z,i!==null&&c&&(i-=o.width),p-=F,z-=k,{...w,direction:!c&&m?"bottomCenter":c?"bottomEnd":"bottom",top:p,left:z,bottom:l,right:c?i:null}};let L=function(c,m){var e=G-o.height,t=r;c&&(t-=o.width),m&&(e+=o.height/2),M||(e+=h.top,t+=h.left),g&&f&&(e+o.height>b.bottom?e=b.bottom-o.height:e<b.top&&(e=b.top),c&&t+o.width>b.right||!c&&t>b.right?t=b.right-o.width:t<b.left&&(t=b.left)),e+=F,t+=k,f||M||(e+=H.top,t+=H.left);var l=B({ele:a,top:e,left:t,needSubtractScrollOffset:R,bodyScrollVisible:s,targetIsInBody:f,referenceIsInFixedPosition:!1,documentHasScroll:d,documentScrollInfo:h,scrollParent:g?D:v,windowWH:{...x},targetIsInFixedPosition:M}),i=null,w=null;let p=e,z=t;return M?(p-=W.top,z-=W.left):(p-=S.top,z-=S.left),f?(i=x.height-e-o.height,w=x.width-t,d.vertical&&s.vertical&&(w-=K.vertical),d.horizontal&&!s.horizontal&&(w-=h.left),d.horizontal&&s.horizontal&&(i-=K.horizontal),d.vertical&&!s.vertical&&(i-=h.top)):(i=v.clientHeight-p-o.height,w=v.clientWidth-z),w!==null&&c&&(w-=o.width),p-=F,z-=k,{...l,direction:!c&&m?"topCenter":c?"topEnd":"top",bottom:i,right:c?w:null,top:p,left:z}};switch(u){case"bottom":y&&n.push({isTail:!1,isCenter:!0,handler:E}),n.push({isTail:P,handler:E}),!y&&T&&n.push({isTail:!1,isCenter:!0,handler:E}),y&&n.push({isTail:!1,isCenter:!0,handler:L}),n.push({isTail:P,handler:L}),!y&&T&&n.push({isTail:!1,isCenter:!0,handler:L});break;case"top":y&&n.push({isTail:!1,isCenter:!0,handler:L}),n.push({isTail:P,handler:L}),!y&&T&&n.push({isTail:!1,isCenter:!0,handler:L}),y&&n.push({isTail:!1,isCenter:!0,handler:E}),n.push({isTail:P,handler:E}),!y&&T&&n.push({isTail:!1,isCenter:!0,handler:E});break}let j=[],q={},A=function(c=!1,m){let e=m.handler(ee?!m.isTail:m.isTail,m.isCenter),t=e.vertical&&e.horizontal,l=e.scrollParentVertical&&e.scrollParentHorizontal,i=c?t&&l:t||l;return e.direction===X&&(q=e),j.push(e),i?(V=e,!0):!1};if(n.some(function(c){let m=c.handler(c.isTail,c.isCenter),e=m.vertical&&m.horizontal,t=m.scrollParentVertical&&m.scrollParentHorizontal;if(m.direction===X&&(q=m),j.push(m),e)return t?(V=m,!0):c.isCenter?void 0:!!A(!0,c);if(!c.isCenter)return A(!0,c)}),!V){let c=null,m=null;j.forEach(e=>{!c&&e.horizontal&&e.vertical&&(c=e),!m&&e.scrollParentHorizontal&&e.scrollParentVertical&&(m=e)}),m?V=m:c?V=c:(V=q,V.isRollback=!0)}return a.style.opacity=O||"",a.style.display=U||"",V}export{me as a,ge as g};
